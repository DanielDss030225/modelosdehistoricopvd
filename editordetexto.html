<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="diligencissautor.css">
        <title>Modelos de Históricos PVD</title>
    
        <link rel="icon" type="image/png" href="logo.png"> 
      <script src="./editorTexto.js"></script>
      <script src="./atualizarDados.js"></script>
      <script type="module" src="./firebaseConfig.js"></script>

       
    </head>


  
<body class="container">

<script>
  window.onload = function () {
  showText(); // Chama sua função aqui
};

</script>

<div id="alertaSucesso" class="alerta-sucesso" style="display: none;">
  Pronto! Novos dados alterados e salvos com sucesso!
</div>


  <div id="loading-screen" style="
    position: fixed;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    z-index: 9999;">
    Carregando...
</div>


  <div class="cabeçalho">
         <a class="aImagem" href="index.html">
      
        <img class="imagem" src="logo.png">
    
      
       

    </a>

    <p class="User" id="user-info">Carregando...</p>
    <button onclick="logout()">Sair</button>
  
  
  </div>
 


  
 <div class="fundotela">

  <!-- Div do alerta oculta inicialmente -->
  <div id="fullscreenAlert" class="alert-fullscreen" style="display: none;">
    <div class="elementoP" >
      <p class="MensagemFechar" >É preciso preencher o NOME e RG da vítima!</p>
      <button id="closeAlert">Fechar</button>
    </div>
  </div>

<div class="maxlargura">
  
 

 <div class="larguraDoTitulo">
  

  <h3 id="titulopag"> &nbsp &nbsp Carregando Título &nbsp &nbsp </h3>
  

 </div>

  


 

    <fieldset> 
      
      <legend> Digite os dados da vítima</legend>
       
      <ul> 
   <li>     
     <input onblur="this.value = this.value.trim(), obterDadosDoFirebase(), mostrarCarregamento();" class="tamanhorg" id="rgvitima"  type="number" placeholder="RG DA VÍTIMA" >                                  
 </li> 
 <li> 
  <input  onblur="this.value = this.value.trim();" id="nomevitima" type="text" placeholder="NOME DA VÍTIMA" >                  
 </li>
  <li> 
  <input  onblur="this.value = this.value.trim();" id="cpfvitima" type="number" placeholder="CPF DA VÍTIMA" >                  
 </li>
       <li>
        <input onblur="this.value = this.value.trim();"  class="ocorrencia" id="telefonevitima" type="tel" placeholder="TELEFONE DA VÍTIMA" > 
       </li>   
       </ul>  



<ul> 
     <li class="ulEndereco">
    <input  onblur="this.value = this.value.trim();" class="ocorrencia" id="ocupacaoVitima" type="text" placeholder="OCUPAÇÃO ATUAL" > 

  </li>
     <li class="ulEndereco">
    <input  onblur="this.value = this.value.trim();" class="ocorrencia" id="enderecoVitima" type="text" placeholder="ENDEREÇO DA VÍTIMA" > 

  </li>
</ul> 



  <ul> 
  <li class="ulEndereco">
     <input onblur="this.value = this.value.trim()" class="tamanhorg" id="nomeMaeVitima"  type="text" placeholder="NOME DA MÃE" >                                  
 </li> 
  <li class="ulEndereco">
  <input  onblur="this.value = this.value.trim();" id="nomePaiVitima" type="text" placeholder="NOME DO PAI" >                  
 </li>
<li class="ulEndereco">
  <input 
    onblur="this.value = this.value.trim();"  
    class="ocorrencia" 
    id="datanascimentovitima" 
    type="date" 
    placeholder="DATA DE NASCIMENTO"
  >
</li>
   </ul>  


<ul> 
  <li class="ulEndereco">
  <select class="ocorrencia" id="escolaridadeVitima">
    <option value="">ESCOLARIDADE</option>
    <option value="1">ANALFABETO (0100)</option>
    <option value="2">ALFABETIZADO (0200)</option>
    <option value="3">ENSINO FUNDAMENTAL INCOMPLETO (8 ANOS ESTUDO) (0300)</option>
    <option value="4">ENSINO FUNDAMENTAL COMPLETO (8 ANOS ESTUDO) (0400)</option>
    <option value="5">ENSINO MEDIO INCOMPLETO ( 2º GRAU) (0500)</option>
    <option value="6">ENSINO MEDIO COMPLETO (2º GRAU) (0600)</option>
    <option value="7">SUPERIOR INCOMPLETO (0700)</option>
    <option value="8">SUPERIOR COMPLETO (0800)</option>
     <option value="12">MESTRADO (0910)</option>
      <option value="13">DOUTORADO (0920)</option>
       <option value="10">ESCOLARIDADE - IGNORADA (9800)</option>
        <option value="11">OUTROS - ESCOLARIDADE (9900)</option>
  </select>
</li>

       <li class="ulEndereco">
  <select class="ocorrencia" id="cor">
    <option value="">COR/ RAÇA</option>
    <option value="2">AMARELA (0200)</option>
    <option value="3">BRANCA (0300)</option>
    <option value="7">PRETO (0400)</option>
    <option value="5">PARDA (0500)</option>
    <option value="8">INDÍGENA (0700)</option>
    <option value="6">IGNORADA (9800)</option>
   
  </select>
</li>
  <li class="ulEndereco">
  <select class="ocorrencia" id="estadoCivil">
    <option value="">Estado Civil</option>
    <option value="2">CASADO (0200)</option>
    <option value="3">DIVORCIADO (0300)</option>
    <option value="4">SEPARADO JUDICIALMENTE (0400)</option>
    <option value="5">SOLTEIRO (0500)</option>
    <option value="6">VIUVO (0600)</option>
    <option value="7">UNIAO ESTAVEL (0700)</option>
    <option value="8">ESTADO CIVIL - NAO DECLARADO (9700)</option>
    <option value="9">ESTADO CIVIL - IGNORADO (9800)</option>
  </select>
</li>
</ul> 
      </fieldset>


     
 
    

      
      <fieldset> 

        <legend> Digite os dados do autor</legend>
                    <ul>

  <li>
    <input onblur="this.value = this.value.trim();" id="rgautor"  class="tamanhorg" type="number" placeholder="RG DO AUTOR" >                           

  </li>
  <li>
    <input onblur="this.value = this.value.trim();"  id="nomeautor" type="text" placeholder="NOME DO AUTOR"   > 


  </li>
   <li> 
  <input  onblur="this.value = this.value.trim();" id="cpfautor" type="number" placeholder="CPF DA AUTOR" >                  


 </li>
  <li>
    <input  onblur="this.value = this.value.trim();" class="ocorrencia" id="telefoneautor" type="tel" placeholder="TELEFONE DO AUTOR" > 

  </li>
  
  </ul>

  <ul>
     <li class="ulEndereco">
    <input  onblur="this.value = this.value.trim();" class="ocorrencia" id="ocupacaoAutor" type="text" placeholder="OCUPAÇÃO ATUAL" > 

  </li>
 <li class="ulEndereco">
    <input  onblur="this.value = this.value.trim();" class="ocorrencia" id="enderecoAutor" type="text" placeholder="ENDEREÇO DO AUTOR" > 

  </li>

 </ul>
 


  <ul> 
  <li class="ulEndereco">
     <input onblur="this.value = this.value.trim()" class="tamanhorg" id="nomeMaeAutor"  type="text" placeholder="NOME DA MÃE" >                                  
 </li> 
  <li class="ulEndereco">
  <input  onblur="this.value = this.value.trim();" id="nomePaiAutor" type="text" placeholder="NOME DO PAI" >                  
 </li>
<li class="ulEndereco">
  <input 
    onblur="this.value = this.value.trim();"  
    class="ocorrencia" 
    id="datanascimentoautor" 
    type="date" 
    placeholder="DATA DE NASCIMENTO"
  >
</li>
   </ul>  


<ul> 
  <li class="ulEndereco">
  <select class="ocorrencia" id="escolaridadeAutor">
      <option value="">ESCOLARIDADE</option>
    <option value="1">ANALFABETO (0100)</option>
    <option value="2">ALFABETIZADO (0200)</option>
    <option value="3">ENSINO FUNDAMENTAL INCOMPLETO (8 ANOS ESTUDO) (0300)</option>
    <option value="4">ENSINO FUNDAMENTAL COMPLETO (8 ANOS ESTUDO) (0400)</option>
    <option value="5">ENSINO MEDIO INCOMPLETO ( 2º GRAU) (0500)</option>
    <option value="6">ENSINO MEDIO COMPLETO (2º GRAU) (0600)</option>
    <option value="7">SUPERIOR INCOMPLETO (0700)</option>
    <option value="8">SUPERIOR COMPLETO (0800)</option>
     <option value="12">MESTRADO (0910)</option>
      <option value="13">DOUTORADO (0920)</option>
       <option value="10">ESCOLARIDADE - IGNORADA (9800)</option>
        <option value="11">OUTROS - ESCOLARIDADE (9900)</option>
  </select>
</li>

       <li class="ulEndereco">
  <select class="ocorrencia" id="corAutor">
     <option value="">COR/ RAÇA</option>
    <option value="2">AMARELA (0200)</option>
    <option value="3">BRANCA (0300)</option>
    <option value="7">PRETO (0400)</option>
    <option value="5">PARDA (0500)</option>
    <option value="8">INDÍGENA (0700)</option>
    <option value="6">IGNORADA (9800)</option>
   
  </select>
</li>
  <li class="ulEndereco">
  <select class="ocorrencia" id="estadoCivilAutor">
     <option value="">Estado Civil</option>
    <option value="2">CASADO (0200)</option>
    <option value="3">DIVORCIADO (0300)</option>
    <option value="4">SEPARADO JUDICIALMENTE (0400)</option>
    <option value="5">SOLTEIRO (0500)</option>
    <option value="6">VIUVO (0600)</option>
    <option value="7">UNIAO ESTAVEL (0700)</option>
    <option value="8">ESTADO CIVIL - NAO DECLARADO (9700)</option>
    <option value="9">ESTADO CIVIL - IGNORADO (9800)</option>
  </select>
</li>
</ul> 

</fieldset>

    <fieldset>
      <legend> Dados complementares</legend>

<ul> 

 <li class="ulEndereco">

  <input class="dadosComplementares" onblur="this.value = this.value.trim();" class="ocorrencia"  id="redsorigem" type="text" placeholder="REDS DE ORIGEM"   > 

</li>

 <li class="ulEndereco">

  <input   class="dadosComplementares" onblur="this.value = this.value.trim();"  class="ocorrencia" id="medidaprotetiva" type="tel" placeholder="MEDIDA PROTETIVA" > 

</li>
  
</ul>



    </fieldset>
 
 


 

<div class="buttongerar">
 
  <ul>

<a id="showAlert">
  <li class="cardGerar">

    <p class="selction"> Atualizar Dados</p>
  
  </li>
  <h3 class="mensagem"> Este botão substitui os "*******" pelos dados do formulário</h3>
</a>
    
  </ul>

  

</div>


<ul>





  <div class="divEditor">  
  <fieldset class="fieldsetEditor"> 
    <legend> Edite seu histórico</legend>
    <div class="row">
    <div class="col-12">

        <textarea  name="descricao" id="idteste" cols="60" rows="10" placeholder="Modelo de histórico" class="descricao"></textarea>
    </div>



</fieldset>

</div>
</ul>
<div class="center">
  <button onclick="copiarTexto()">Copiar texto</button>

</div>

  
</div>





</div>







<script type="module">
    
    // Importar as funções necessárias do SDK
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-auth.js";
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js";
    import { set, getDatabase, ref, get, } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-database.js";
 
  // Configuração do Firebase
  const firebaseConfig = {
      apiKey: "AIzaSyDQWO9csuYqrd0JyXa_cs4f3jAsjQAEWSw",
      authDomain: "meu-site-fd954.firebaseapp.com",
      projectId: "meu-site-fd954",
      storageBucket: "meu-site-fd954.firebasestorage.app",
      messagingSenderId: "1062346912662",
      appId: "1:1062346912662:web:0f41873e12965c545363b7",
      measurementId: "G-5HXX5ZZKER"
    };
     
    
// Inicializar o Firebase
const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const auth = getAuth(app); // Obtém corretamente a instância de autenticação

// Verifica o usuário autenticado
onAuthStateChanged(auth, (user) => {
    if (user) {
        document.getElementById("user-info").innerText = `Usuário: ${user.email}`;
    } else {
        document.getElementById("user-info").innerText = "Nenhum usuário autenticado";
        window.location.href = "login.html"; // Redireciona para login se não estiver logado
    }
});

// Função para sair da conta
window.logout = function () {
    signOut(auth).then(() => {
        window.location.href = "login.html";
    }).catch(error => {
        console.error("Erro ao sair:", error);
    });
}


   window.obterDadosDoFirebase = function (path, dados)  {



  const rgvitimavalor = document.getElementById("rgvitima").value  
  
  console.log(rgvitimavalor);   

   //// A FUÇÃO ESTAVA AQUI
  

  const valorDoInput = "DADOS/" + rgvitimavalor;
  // Referência para o nó específico no Firebase

  const dbRef = ref(db, valorDoInput);

get(dbRef)
    .then((snapshot) => {

      
    
      ocultarCarregamento() 
      
if (!rgvitimavalor) {
  console.error("É necessário digitar o RG da vítima!"  );
 
  return 
;
}
const lista = snapshot.val();
      console.log(lista);// Exibe a lista completa no console
        //AJUSTA VALOR PARA O VALOR DO SNAPSHOT
          const valor = snapshot.val();
          
    //FUNÇÃO QUE CONVERTE UMA LISTA JSON PARA ARRAY
    function converterParaArray(valor) {
      if (!Array.isArray(valor)) {
          console.error("ERRO: RG Não cadastrado no sistema!", valor);
        return ['', '', '', '', '', '', '', '', '', '', '','', '', '', '', '', '', '',]; // Retorna um array vazio para evitar erro
      }

      return valor.map(item => item === null ? "NULL" : String(item));
  }

  
  // Exemplo de uso
  const valorTeste = valor; // Obtém a lista do Firebase     
  const valorLista = valorTeste;
  const entrada = JSON.parse(valorLista); // Converte a string JSON em um array
  const resultado = converterParaArray(entrada);
  
  console.log(resultado);
   


  
 
  //FUNÇÃO QUE OBTEM INDICES DE UMA LISTA 0
  function indice0(resultado, indice00) {
    // Verifica se o índice está dentro do intervalo válido
    if (indice00 >= 0 && indice00 < resultado.length) {
      return resultado[indice00];
    } else {
      return "";
    }
  }
  // Exemplo de uso
  const lista0 = resultado;
  const indice00 = 0; // Índice do elemento que deseja obter
  const elemento0 = indice0(lista0, indice00);
  console.log(elemento0); // Saída: 
  
  //FUNÇÃO QUE OBTEM INDICES DE UMA LISTA 1
  function indice1(resultado, indice11) {
    // Verifica se o índice está dentro do intervalo válido
    if (indice11 >= 1 && indice11 < resultado.length) {
      return resultado[indice11];
    } else {
      return "";
    }
  }
  // Exemplo de uso
  const lista1 = resultado;
  const indice11 = 1; // Índice do elemento que deseja obter
  const elemento1 = indice1(lista1, indice11);
  console.log(elemento1); // Saída:
  
  
  
  //FUNÇÃO QUE OBTEM INDICES DE UMA LISTA 2
  function indice2(resultado, indice22) {
    // Verifica se o índice está dentro do intervalo válido
    if (indice22 >= 2 && indice22 < resultado.length) {
      return resultado[indice22];
    } else {
      return "";
    }
  }
  // Exemplo de uso
  const lista2 = resultado;
  const indice22 = 2; // Índice do elemento que deseja obter
  const elemento2 = indice2(lista2, indice22);
  console.log(elemento2); // Saída: 
  
  
  //FUNÇÃO QUE OBTEM INDICES DE UMA LISTA 3
  function indice3(resultado, indice33) {
    // Verifica se o índice está dentro do intervalo válido
    if (indice33 >= 3 && indice33 < resultado.length) {
      return resultado[indice33];
    } else {
      return "";
    }
  }
  // Exemplo de uso
  const lista3 = resultado;
  const indice33 = 3; // Índice do elemento que deseja obter
  const elemento3 = indice3(lista3, indice33);
  console.log(elemento3); // Saída: 
  
  
  //FUNÇÃO QUE OBTEM INDICES DE UMA LISTA 4
  function indice4(resultado, indice44) {
    // Verifica se o índice está dentro do intervalo válido
    if (indice44 >= 4 && indice44 < resultado.length) {
      return resultado[indice44];
    } else {
      return "";
    }
  }
  // Exemplo de uso
  const lista4 = resultado;
  const indice44 = 4; // Índice do elemento que deseja obter
  const elemento4 = indice4(lista4, indice44);
  console.log(elemento4); // Saída: 
  
  
  
  //FUNÇÃO QUE OBTEM INDICES DE UMA LISTA 5
  function indice5(resultado, indice55) {
    // Verifica se o índice está dentro do intervalo válido
    if (indice55 >= 5 && indice55 < resultado.length) {
      return resultado[indice55];
    } else {
      return "";
    }
  }
  // Exemplo de uso
  const lista5 = resultado;
  const indice55 = 5; // Índice do elemento que deseja obter
  const elemento5 = indice5(lista5, indice55);
  console.log(elemento5); // Saída: 
  
  
  //FUNÇÃO QUE OBTEM INDICES DE UMA LISTA 6
  function indice6(resultado, indice66) {
    // Verifica se o índice está dentro do intervalo válido
    if (indice66 >= 6 && indice66 < resultado.length) {
      return resultado[indice66];
    } else {
      return "";
    }
  }
  // Exemplo de uso
  const lista6 = resultado;
  const indice66 = 6; // Índice do elemento que deseja obter
  const elemento6 = indice3(lista6, indice66);
  console.log(elemento6); // Saída: 

  
   //FUNÇÃO QUE OBTEM INDICES DE UMA LISTA 7
  function indice7(resultado, indice77) {
    // Verifica se o índice está dentro do intervalo válido
    if (indice77 >= 7 && indice77 < resultado.length) {
      return resultado[indice77];
    } else {
      return "";
    }
  }
  // Exemplo de uso
  const lista7 = resultado;
  const indice77 = 7; // Índice do elemento que deseja obter
  const elemento7 = indice3(lista7, indice77);
  console.log(elemento7); // Saída: 
  


  //FUNÇÃO QUE OBTEM INDICES DE UMA LISTA 8
  function indice8(resultado, indice88) {
    // Verifica se o índice está dentro do intervalo válido
    if (indice88 >= 8 && indice88 < resultado.length) {
      return resultado[indice88];
    } else {
      return "";
    }
  }
  // Exemplo de uso
  const lista8 = resultado;
  const indice88 = 8; // Índice do elemento que deseja obter
  const elemento8 = indice3(lista8, indice88);
  console.log(elemento8); // Saída: 
  

 //FUNÇÃO QUE OBTEM INDICES DE UMA LISTA 9
  function indice9(resultado, indice99) {
    // Verifica se o índice está dentro do intervalo válido
    if (indice99 >= 9 && indice99 < resultado.length) {
      return resultado[indice99];
    } else {
      return "";
    }
  }
  // Exemplo de uso
  const lista9 = resultado;
  const indice99 = 9; // Índice do elemento que deseja obter
  const elemento9 = indice3(lista9, indice99);
  console.log(elemento9); // Saída: 


  
 //FUNÇÃO QUE OBTEM INDICES DE UMA LISTA 10
  function indice10(resultado, indice1010) {
    // Verifica se o índice está dentro do intervalo válido
    if (indice1010 >= 10 && indice1010 < resultado.length) {
      return resultado[indice1010];
    } else {
      return "";
    }
  }
  // Exemplo de uso
  const lista10 = resultado;
  const indice1010 = 10; // Índice do elemento que deseja obter
  const elemento10 = indice3(lista10, indice1010);
  console.log(elemento10); // Saída: 



   //FUNÇÃO QUE OBTEM INDICES DE UMA LISTA 11
  function indice10(resultado, indice1111) {
    // Verifica se o índice está dentro do intervalo válido
    if (indice1111 >= 11 && indice1111< resultado.length) {
      return resultado[indice1111];
    } else {
      return "";
    }
  }
  // Exemplo de uso
  const lista11 = resultado;
  const indice1111 = 11; // Índice do elemento que deseja obter
  const elemento11 = indice3(lista11, indice1111);
  console.log(elemento11); // Saída: 


   //FUNÇÃO QUE OBTEM INDICES DE UMA LISTA 12
  function indice12(resultado, indice1212) {
    // Verifica se o índice está dentro do intervalo válido
    if (indice1212 >= 12 && indice1212< resultado.length) {
      return resultado[indice1212];
    } else {
      return "";
    }
  }
  // Exemplo de uso
  const lista12 = resultado;
  const indice1212 = 12; // Índice do elemento que deseja obter
  const elemento12 = indice12(lista12, indice1212);
  console.log(elemento12); // Saída: 



   //FUNÇÃO QUE OBTEM INDICES DE UMA LISTA 13
  function indice13(resultado, indice1313) {
    // Verifica se o índice está dentro do intervalo válido
    if (indice1313 >= 13 && indice1313< resultado.length) {
      return resultado[indice1313];
    } else {
      return "";
    }
  }
  // Exemplo de uso
const lista13 = resultado;
const indice1313 = 13; // Índice do elemento que deseja obter
const elemento13 = indice13(lista13, indice1313);


   //FUNÇÃO QUE OBTEM INDICES DE UMA LISTA 14
  function indice14(resultado, indice1414) {
    // Verifica se o índice está dentro do intervalo válido
    if (indice1414 >= 14 && indice1414< resultado.length) {
      return resultado[indice1414];
    } else {
      return "";
    }
  }
  // Exemplo de uso
const lista14 = resultado;
const indice1414 = 14; // Índice do elemento que deseja obter
const elemento14 = indice14(lista14, indice1414);


   //FUNÇÃO QUE OBTEM INDICES DE UMA LISTA 15
  function indice15(resultado, indice1515) {
    // Verifica se o índice está dentro do intervalo válido
    if (indice1515 >= 15 && indice1515< resultado.length) {
      return resultado[indice1515];
    } else {
      return "";
    }
  }
  // Exemplo de uso
const lista15 = resultado;
const indice1515 = 15; // Índice do elemento que deseja obter
const elemento15 = indice15(lista15, indice1515);



   //FUNÇÃO QUE OBTEM INDICES DE UMA LISTA 16
  function indice16(resultado, indice1616) {
    // Verifica se o índice está dentro do intervalo válido
    if (indice1616 >= 16 && indice1616< resultado.length) {
      return resultado[indice1616];
    } else {
      return "";
    }
  }
  // Exemplo de uso
const lista16 = resultado;
const indice1616 = 16; // Índice do elemento que deseja obter
const elemento16 = indice16(lista16, indice1616);

   //FUNÇÃO QUE OBTEM INDICES DE UMA LISTA 17
  function indice17(resultado, indice1717) {
    // Verifica se o índice está dentro do intervalo válido
    if (indice1717 >= 17 && indice1717< resultado.length) {
      return resultado[indice1717];
    } else {
      return "";
    }
  }
  // Exemplo de uso
const lista17 = resultado;
const indice1717 = 17; // Índice do elemento que deseja obter
const elemento17 = indice17(lista17, indice1717);


   //FUNÇÃO QUE OBTEM INDICES DE UMA LISTA 18
  function indice18(resultado, indice1818) {
    // Verifica se o índice está dentro do intervalo válido
    if (indice1818 >= 18 && indice1818< resultado.length) {
      return resultado[indice1818];
    } else {
      return "";
    }
  }
  // Exemplo de uso
const lista18 = resultado;
const indice1818 = 18; // Índice do elemento que deseja obter
const elemento18 = indice18(lista18, indice1818);





   //FUNÇÃO QUE OBTEM INDICES DE UMA LISTA 19
  function indice19(resultado, indice1919) {
    // Verifica se o índice está dentro do intervalo válido
    if (indice1919 >= 19 && indice1919< resultado.length) {
      return resultado[indice1919];
    } else {
      return "";
    }
  }
  // Exemplo de uso
const lista19 = resultado;
const indice1919 = 19; // Índice do elemento que deseja obter
const elemento19 = indice19(lista19, indice1919);



   //FUNÇÃO QUE OBTEM INDICES DE UMA LISTA 20
  function indice20(resultado, indice2020) {
    // Verifica se o índice está dentro do intervalo válido
    if (indice2020 >= 20 && indice2020< resultado.length) {
      return resultado[indice2020];
    } else {
      return "";
    }
  }
  // Exemplo de uso
const lista20 = resultado;
const indice2020 = 20; // Índice do elemento que deseja obter
const elemento20 = indice20(lista20, indice2020);


   //FUNÇÃO QUE OBTEM INDICES DE UMA LISTA 21
  function indice21(resultado, indice2121) {
    // Verifica se o índice está dentro do intervalo válido
    if (indice2121 >= 21 && indice2121< resultado.length) {
      return resultado[indice2121];
    } else {
      return "";
    }
  }
  // Exemplo de uso
const lista21 = resultado;
const indice2121 = 21; // Índice do elemento que deseja obter
const elemento21 = indice21(lista21, indice2121);


  //FUNÇÃO QUE OBTEM INDICES DE UMA LISTA 22
  function indice30(resultado, indice3030) {
    // Verifica se o índice está dentro do intervalo válido
    if (indice3030 >= 22 && indice3030< resultado.length) {
      return resultado[indice3030];
    } else {
      return "";
    }
  }
  // Exemplo de uso
const lista30 = resultado;
const indice3030 = 22; // Índice do elemento que deseja obter
const elemento30 = indice30(lista30, indice3030);

  //FUNÇÃO QUE OBTEM INDICES DE UMA LISTA 23
  function indice31(resultado, indice3131) {
    // Verifica se o índice está dentro do intervalo válido
    if (indice3131 >= 23 && indice3131< resultado.length) {
      return resultado[indice3131];
    } else {
      return "";
    }
  }
  // Exemplo de uso
const lista31 = resultado;
const indice3131 = 23; // Índice do elemento que deseja obter
const elemento31 = indice31(lista31, indice3131);


  //FUNÇÃO QUE OBTEM INDICES DE UMA LISTA 24
  function indice32(resultado, indice3232) {
    // Verifica se o índice está dentro do intervalo válido
    if (indice3232 >= 24 && indice3232< resultado.length) {
      return resultado[indice3232];
    } else {
      return "";
    }
  }
  // Exemplo de uso
const lista32 = resultado;
const indice3232 = 24; // Índice do elemento que deseja obter
const elemento32 = indice32(lista32, indice3232);




  //AJUSTA O VALOR DOS SELECTS
//SELETORES AUTOR
//SELETORES AUTOR
//SELETORES AUTOR
 const seletorEAutorEstadoCivil = document.querySelector('select[id="estadoCivilAutor"]'); // pega o elemento, não o valor
if (elemento18 && seletorEAutorEstadoCivil) {
  const valorLimpo18 = elemento18.trim();
  const optionExists = Array.from(seletorEAutorEstadoCivil.options).some(opt => opt.value.trim() === valorLimpo18);

  if (optionExists) {
    seletorEAutorEstadoCivil.value = valorLimpo18;
  } else {
    console.warn(`Valor "${valorLimpo18}" não encontrado nas opções do select 'corAutor'.`);
  }
}




 const seletorEAutorcor = document.querySelector('select[id="corAutor"]'); // pega o elemento, não o valor
if (elemento17 && seletorEAutorcor) {
  const valorLimpo17 = elemento17.trim();
  const optionExists = Array.from(seletorEAutorcor.options).some(opt => opt.value.trim() === valorLimpo17);

  if (optionExists) {
    seletorEAutorcor.value = valorLimpo17;
  } else {
    console.warn(`Valor "${valorLimpo17}" não encontrado nas opções do select 'corAutor'.`);
  }
}


 const seletorEAutorEscol = document.querySelector('select[id="escolaridadeAutor"]'); // pega o elemento, não o valor
if (elemento16 && seletorEAutorEscol) {
  const valorLimpo16 = elemento16.trim();
  const optionExists = Array.from(seletorEAutorEscol.options).some(opt => opt.value.trim() === valorLimpo16);

  if (optionExists) {
    seletorEAutorEscol.value = valorLimpo16;
  } else {
    console.warn(`Valor "${valorLimpo16}" não encontrado nas opções do select 'escolaridadeAutor'.`);
  }
}
//SELETORES AUTOR
//SELETORES AUTOR
//SELETORES AUTOR


 const seletorEVitima = document.querySelector('select[id="escolaridadeVitima"]'); // pega o elemento, não o valor
if (elemento13 && seletorEVitima) {
  const valorLimpo = elemento13.trim();
  const optionExists = Array.from(seletorEVitima.options).some(opt => opt.value.trim() === valorLimpo);

  if (optionExists) {
    seletorEVitima.value = valorLimpo;
  } else {
    console.warn(`Valor "${valorLimpo}" não encontrado nas opções do select 'escolaridadeVitima'.`);
  }
}



const seletorEVitima02 = document.querySelector('select[id="cor"]'); // pega o elemento, não o valor
if (elemento14 && seletorEVitima02) {
  const valorLimpo02 = elemento14.trim();
  const optionExists = Array.from(seletorEVitima02.options).some(opt => opt.value.trim() === valorLimpo02);

  if (optionExists) {
    seletorEVitima02.value = valorLimpo02;
  } else {
    console.warn(`Valor "${valorLimpo02}" não encontrado nas opções do select 'escolaridadeVitima'.`);
  }
}


const seletorEVitima03 = document.querySelector('select[id="estadoCivil"]'); // pega o elemento, não o valor
if (elemento15 && seletorEVitima03) {
  const valorLimpo03 = elemento15.trim();
  const optionExists = Array.from(seletorEVitima03.options).some(opt => opt.value.trim() === valorLimpo03);

  if (optionExists) {
    seletorEVitima03.value = valorLimpo03;
  } else {
    console.warn(`Valor "${valorLimpo03}" não encontrado nas opções do select 'escolaridadeVitima'.`);
  }
}

  //AJUSTA O VALOR DOS INPUTS
  //AJUSTA O VALOR DOS INPUTS

    //AJUSTA O VALOR DOS INPUTS

      //AJUSTA O VALOR DOS INPUTS

  const input19 = document.getElementById('nomeMaeVitima'); // Substitua pelo ID do seu input
    if (elemento19 == "NULL") {
      input19.value = "";
    } else {
      input19.value = elemento19;
    }


  const input20 = document.getElementById('nomePaiVitima'); // Substitua pelo ID do seu input
    if (elemento20 == "NULL") {
      input20.value = "";
    } else {
      input20.value = elemento20;
    }

  const input21 = document.getElementById('datanascimentovitima'); // Substitua pelo ID do seu input
    if (elemento21 == "NULL") {
      input21.value = "";
    } else {
      input21.value = elemento21;
    }


  const input30 = document.getElementById('nomeMaeAutor'); // Substitua pelo ID do seu input
    if (elemento30 == "NULL") {
      input30.value = "";
    } else {
      input30.value = elemento30;
    }


  const input31 = document.getElementById('nomePaiAutor'); // Substitua pelo ID do seu input
    if (elemento31 == "NULL") {
      input31.value = "";
    } else {
      input31.value = elemento31;
    }

      const input32 = document.getElementById('datanascimentoautor'); // Substitua pelo ID do seu input
    if (elemento32 == "NULL") {
      input32.value = "";
    } else {
      input32.value = elemento32;
    }


  const input0 = document.getElementById('nomevitima'); // Substitua pelo ID do seu input
    if (elemento0 == "NULL") {
      input0.value = "";
    } else {
      input0.value = elemento0;
    }
  
     const input7 = document.getElementById('cpfvitima'); // Substitua pelo ID do seu input
    if (elemento7 == "NULL") {
      input7.value = "";
    } else {
      input7.value = elemento7;
    }


  const input9 = document.getElementById('enderecoVitima'); // Substitua pelo ID do seu input0909
    if (elemento9 == "NULL") {
      input9.value = "";
    } else {
      input9.value = elemento9;
    }

const input11 = document.getElementById('ocupacaoVitima'); // Substitua pelo ID do seu input0909
    if (elemento11 == "NULL") {
      input11.value = "";
    } else {
      input11.value = elemento11;
    }

    const input1 = document.getElementById('telefonevitima'); // Substitua pelo ID do seu input
    if (elemento1 == "NULL") {
      input1.value = ""; 

    } else {
      input1.value = elemento1; 
    }
  
  const input3 = document.getElementById('nomeautor'); // Substitua pelo ID do seu input
    if (elemento3 == "NULL") {
      input3.value = ""; // Define o valor do campo de entrada com o valor obtido
    } else {
      input3.value = elemento3; // Define o valor do campo de entrada com o valor obtido
    }


   const input10 = document.getElementById('enderecoAutor'); // Substitua pelo ID do seu input
    if (elemento10 == "NULL") {
      input10.value = ""; // Define o valor do campo de entrada com o valor obtido
    } else {
      input10.value = elemento10; // Define o valor do campo de entrada com o valor obtido
    }

 const input12 = document.getElementById('ocupacaoAutor'); // Substitua pelo ID do seu input
    if (elemento12 == "NULL") {
      input12.value = ""; // Define o valor do campo de entrada com o valor obtido
    } else {
      input12.value = elemento12; // Define o valor do campo de entrada com o valor obtido
    }

  const input8 = document.getElementById('cpfautor'); // Substitua pelo ID do seu input
    if (elemento8 == "NULL") {
      input8.value = ""; // Define o valor do campo de entrada com o valor obtido
    } else {
      input8.value = elemento8; // Define o valor do campo de entrada com o valor obtido
    }

    const input4 = document.getElementById('telefoneautor'); // Substitua pelo ID do seu input
    if (elemento4 == "NULL") {
      input4.value = ""; // Define o valor do campo de entrada com o valor obtido
    } else {
      input4.value = elemento4; // Define o valor do campo de entrada com o valor obtido
    }
  
    
    const input2 = document.getElementById('rgautor'); // Substitua pelo ID do seu input
    if (elemento2 == "NULL") {
      input2.value = ""; // Define o valor do campo de entrada com o valor obtido
    } else {
      input2.value = elemento2; // Define o valor do campo de entrada com o valor obtido
    }
  
    const input5 = document.getElementById('redsorigem'); // Substitua pelo ID do seu input
    if (elemento5 == "NULL") {
      input5.value = ""; // Define o valor do campo de entrada com o valor obtido
    } else {
      input5.value = elemento5; // Define o valor do campo de entrada com o valor obtido
    }
    const input6 = document.getElementById('medidaprotetiva'); // Substitua pelo ID do seu input
    if (elemento6 == "NULL") {
      input6.value = ""; // Define o valor do campo de entrada com o valor obtido
    } else {
      input6.value = elemento6; // Define o valor do campo de entrada com o valor obtido
    }


    ocultarCarregamento()
    
  
  })


}
/**
 * Salva dados no Firebase Realtime Database.
 * @param {string} DADOS - Caminho no Realtime Database onde os dados serão salvos.
 * @param {Object} dados - Objeto com os dados a serem salvos.
 */

 function salvarDadosEmLista(DADOS, dados) {
  const rgvitimavalor01 = document.getElementById("rgvitima").value; 
  const nomevitima = document.getElementById("nomevitima").value; 
  console.log("ID da vítima:", rgvitimavalor01);
  console.log("Nome da vítima", nomevitima);

  if (!rgvitimavalor01) {
    mostrarAlerta()
    console.error("O ID da vítima está vazio. Verifique o campo de entrada.");
    return;
  }
  if (!nomevitima) {
    mostrarAlerta()
    console.error("O nome da vítima está vazio. Verifique o campo de entrada.");
    return;
  }

  
  
  const referencia = ref(db, `${DADOS}/${rgvitimavalor01}`); // Usa o rgvitimavalor01 como o nó principal

  // Aqui, você converte o array de dados para uma string JSON
  const dadosArray = JSON.stringify(dados); // Converte os dados para um formato de string JSON

  // Salva os dados como uma string representando um array
  set(referencia, dadosArray) // Salva a string JSON representando o array
    .then(() => {
      console.log("Dados salvos com sucesso no Realtime Database!");
    })
    .catch((erro) => {
      console.error("Erro ao salvar dados no Realtime Database:", erro);
    });
}

// Capturar os valores dos inputs e salvar no Firebase
document.getElementById("showAlert").addEventListener("click", () => {
  // Obter os valores dos inputs
  const nomeVitima = document.getElementById("nomevitima").value;
  const rgVitima = document.getElementById("rgvitima").value;
  const cpfvitima = document.getElementById("cpfvitima").value;
  const cpfautor = document.getElementById("cpfautor").value;
  const nomeAutor = document.getElementById("nomeautor").value;
  const nomeMaeVitima = document.getElementById("nomeMaeVitima").value;
  const nomePaiVitima = document.getElementById("nomePaiVitima").value;
  const datanascimentovitima = document.getElementById("datanascimentovitima").value;
  const nomeMaeAutor = document.getElementById("nomeMaeAutor").value;
  const nomePaiAutor = document.getElementById("nomePaiAutor").value;
  const datanascimentoautor = document.getElementById("datanascimentoautor").value;



let telefoneAutor = document.getElementById("telefoneautor").value;
// Remove tudo que não for número
telefoneAutor = telefoneAutor.replace(/\D/g, "");
// Pega apenas os 9 últimos dígitos
telefoneAutor = telefoneAutor.slice(-9);
// Formata como XXX-XXX-XXX
telefoneAutor = telefoneAutor.replace(/(\d{3})(\d{3})(\d{3})/, "$1-$2-$3");
console.log("Telefone formatado:", telefoneAutor);

let telefoneVitima = document.getElementById("telefonevitima").value;
// Remove tudo que não for número
telefoneVitima = telefoneVitima.replace(/\D/g, "");
// Pega apenas os 9 últimos dígitos
telefoneVitima = telefoneVitima.slice(-9);
// Formata como XXX-XXX-XXX
telefoneVitima = telefoneVitima.replace(/(\d{3})(\d{3})(\d{3})/, "$1-$2-$3");
console.log("Telefone formatado:", telefoneVitima);


  const rgAutorOutro = document.getElementById("rgautor").value;
  const redsOrigem = document.getElementById("redsorigem").value;
  const medidaProtetiva = document.getElementById("medidaprotetiva").value;
  const enderecoVitima = document.getElementById("enderecoVitima").value;
  const enderecoAutor= document.getElementById("enderecoAutor").value;
  const ocupacaoVitima= document.getElementById("ocupacaoVitima").value;
  const ocupacaoAutor= document.getElementById("ocupacaoAutor").value;

  const estadoCivilAutor = document.querySelector('select[id="estadoCivilAutor"]');
  const valorSelecionado18 = estadoCivilAutor ? estadoCivilAutor.value : null;

  const campoCorAutor = document.querySelector('select[id="corAutor"]');
  const valorSelecionado17 = campoCorAutor ? campoCorAutor.value : null;

   const escolaridadeAutor = document.querySelector('select[id="escolaridadeAutor"]');
  const valorSelecionado16 = escolaridadeAutor ? escolaridadeAutor.value : null;

  const campoESCOLARIDADE01 = document.querySelector('select[id="escolaridadeVitima"]');
  const valorSelecionado = campoESCOLARIDADE01 ? campoESCOLARIDADE01.value : null;
  const cor02 = document.querySelector('select[id="cor"]');
  const valorSelecionado1 = cor02 ? cor02.value : null;
  const estadoCivil02 = document.querySelector('select[id="estadoCivil"]');
  const valorSelecionado2 = estadoCivil02 ? estadoCivil02.value : null;




  const dadosLista = [
    nomeVitima || "NULL",    //01        // Usa "N/A" caso o input esteja vazio
    telefoneVitima || "NULL", //02
    rgAutorOutro || "NULL",//03
    nomeAutor || "NULL",//04   
    telefoneAutor || "NULL",//05  
    redsOrigem || "NULL",//06  
    medidaProtetiva || "NULL",//07  
    cpfvitima || "NULL",//08  
    cpfautor || "NULL",//09  
    enderecoVitima || "NULL",//10  
    enderecoAutor || "NULL",//11  
    ocupacaoVitima || "NULL",//12  
    ocupacaoAutor || "NULL",//13 
    valorSelecionado || "NULL",//13 
    valorSelecionado1 || "NULL",//13 
    valorSelecionado2 || "NULL",//13 
    valorSelecionado16 || "NULL",//16
    valorSelecionado17 || "NULL",//16
    valorSelecionado18 || "NULL",//16
    nomeMaeVitima || "NULL",//16
    nomePaiVitima || "NULL",//16
    datanascimentovitima || "NULL",//16
    nomeMaeAutor || "NULL",//16
    nomePaiAutor || "NULL",//16
    datanascimentoautor || "NULL",//16


  ];

  // Salvar no Firebase
  
  salvarDadosEmLista("DADOS", dadosLista);
  

  teste()
});



 function salvarDadosVitima(DADOSGERAIS, dados) {
  const rgvitimavalor01 = document.getElementById("rgvitima").value; 
  const nomevitima = document.getElementById("nomevitima").value; 
  console.log("ID da vítima:", rgvitimavalor01);
  console.log("Nome da vítima", nomevitima);

  
  
  const referencia = ref(db, `${DADOSGERAIS}/${rgvitimavalor01}`); // Usa o rgvitimavalor01 como o nó principal

  // Aqui, você converte o array de dados para uma string JSON
  const dadosArray = JSON.stringify(dados); // Converte os dados para um formato de string JSON

  // Salva os dados como uma string representando um array
  set(referencia, dadosArray) // Salva a string JSON representando o array
    .then(() => {
      console.log("Dados salvos com sucesso no Realtime Database!");
    })
    .catch((erro) => {
      console.error("Erro ao salvar dados no Realtime Database:", erro);
    });
}

// Capturar os valores dos inputs e salvar no Firebase
document.getElementById("showAlert").addEventListener("click", () => {
  // Obter os valores dos inputs
  const nomeVitima = document.getElementById("nomevitima").value;
  const rgVitima = document.getElementById("rgvitima").value;
  const cpfvitima = document.getElementById("cpfvitima").value;
  const enderecoVitima = document.getElementById("enderecoVitima").value;
  const ocupacaoVitima= document.getElementById("ocupacaoVitima").value;
  const campoESCOLARIDADE01 = document.querySelector('select[id="escolaridadeVitima"]');
  const valorSelecionado = campoESCOLARIDADE01 ? campoESCOLARIDADE01.value : null;
  const cor02 = document.querySelector('select[id="cor"]');
  const valorSelecionado1 = cor02 ? cor02.value : null;
  const estadoCivil02 = document.querySelector('select[id="estadoCivil"]');
  const valorSelecionado2 = estadoCivil02 ? estadoCivil02.value : null;
 const nomeMaeVitima = document.getElementById("nomeMaeVitima").value;
  const nomePaiVitima = document.getElementById("nomePaiVitima").value;
  const datanascimentovitima = document.getElementById("datanascimentovitima").value;
  



let telefoneVitima = document.getElementById("telefonevitima").value;
// Remove tudo que não for número
telefoneVitima = telefoneVitima.replace(/\D/g, "");
// Pega apenas os 9 últimos dígitos
telefoneVitima = telefoneVitima.slice(-9);
// Formata como XXX-XXX-XXX
telefoneVitima = telefoneVitima.replace(/(\d{3})(\d{3})(\d{3})/, "$1-$2-$3");
console.log("Telefone formatado:", telefoneVitima);



  
  // Criar a lista dinamicamente com os valores capturados
  const dadosLista02 = [
    nomeVitima || "NULL",    //01        // Usa "N/A" caso o input esteja vazio
    telefoneVitima || "NULL", //02 
    rgVitima || "NULL",//03  
    cpfvitima || "NULL",//04  
    enderecoVitima || "NULL",//5  
    ocupacaoVitima || "NULL",//6
    valorSelecionado || "NULL",//7 
    valorSelecionado1 || "NULL",//8
    valorSelecionado2 || "NULL",//9
nomeMaeVitima || "NULL",//7 
    nomePaiVitima || "NULL",//8
    datanascimentovitima || "NULL",//9


  ];
    salvarDadosVitima("DADOSGERAIS", dadosLista02);
});
   



 function salvarDadosAutor(DADOSGERAIS, dados) {
  const rgautor01 = document.getElementById("rgautor").value; 
  const nomeautor = document.getElementById("nomeautor").value; 
  console.log("ID do autor:", rgautor01);
  console.log("Nome da autor", nomeautor);

  
  const referencia = ref(db, `${DADOSGERAIS}/${rgautor01}`); // Usa o rgvitimavalor01 como o nó principal

  // Aqui, você converte o array de dados para uma string JSON
  const dadosArray = JSON.stringify(dados); // Converte os dados para um formato de string JSON

  // Salva os dados como uma string representando um array
  set(referencia, dadosArray) // Salva a string JSON representando o array
    .then(() => {
      console.log("Dados salvos com sucesso no Realtime Database!");
    })
    .catch((erro) => {
      console.error("Erro ao salvar dados no Realtime Database:", erro);
    });
}

// Capturar os valores dos inputs e salvar no Firebase
document.getElementById("showAlert").addEventListener("click", () => {
  // Obter os valores dos inputs
  const nomeAutor = document.getElementById("nomeautor").value;
  const rgAutorOutro = document.getElementById("rgautor").value;
  const cpfautor = document.getElementById("cpfautor").value;
  const enderecoAutor= document.getElementById("enderecoAutor").value;
  const ocupacaoAutor= document.getElementById("ocupacaoAutor").value;
  const estadoCivilAutor = document.querySelector('select[id="estadoCivilAutor"]');
  const valorSelecionado18 = estadoCivilAutor ? estadoCivilAutor.value : null;
  const campoCorAutor = document.querySelector('select[id="corAutor"]');
  const valorSelecionado17 = campoCorAutor ? campoCorAutor.value : null;
   const escolaridadeAutor = document.querySelector('select[id="escolaridadeAutor"]');
  const valorSelecionado16 = escolaridadeAutor ? escolaridadeAutor.value : null;

  const nomeMaeAutor = document.getElementById("nomeMaeAutor").value;
  const nomePaiAutor = document.getElementById("nomePaiAutor").value;
  const datanascimentoautor = document.getElementById("datanascimentoautor").value;


let telefoneAutor = document.getElementById("telefoneautor").value;
// Remove tudo que não for número
telefoneAutor = telefoneAutor.replace(/\D/g, "");
// Pega apenas os 9 últimos dígitos
telefoneAutor = telefoneAutor.slice(-9);
// Formata como XXX-XXX-XXX
telefoneAutor = telefoneAutor.replace(/(\d{3})(\d{3})(\d{3})/, "$1-$2-$3");
console.log("Telefone formatado:", telefoneAutor);





  // Criar a lista dinamicamente com os valores capturados
  const dadosLista03 = [
    nomeAutor || "NULL",//01 
    telefoneAutor || "NULL",//02
    rgAutorOutro || "NULL",//03
    cpfautor || "NULL",//04
    enderecoAutor || "NULL",//05
    ocupacaoAutor || "NULL",//06
    valorSelecionado16 || "NULL",//07
    valorSelecionado17 || "NULL",//08
    valorSelecionado18 || "NULL",//09
        nomeMaeAutor || "NULL",//09
            nomePaiAutor || "NULL",//09
    datanascimentoautor || "NULL",//09

  ];

  // Salvar no Firebase
  
  salvarDadosAutor("DADOSGERAIS", dadosLista03);

});
 
  </script>
  <script>
    // Seleciona os elementos
    const alertBox = document.getElementById("fullscreenAlert");
    const closeAlertButton = document.getElementById("closeAlert");


    function mostrarAlertaSucesso() {
  const alerta = document.getElementById("alertaSucesso");
  alerta.style.display = "block";

  setTimeout(() => {
    alerta.style.display = "none";
  }, 4000); // desaparece após 4 segundos
}

    // Função para mostrar o alerta
    function mostrarAlerta() {
      alertBox.style.display = "flex"; // Mostra o alerta
    }

    // Fecha o alerta
    closeAlertButton.addEventListener("click", () => {
      alertBox.style.display = "none"; // Esconde o alerta
    });

 
  </script>
  
  
  


</div>


</body>


<footer>
                  
  <p class="footerp">&nbsp &nbsp  </p>
  <p class="footerp">     Este sistema foi desenvolvido por Daniel Silva, SD PM, 3 Cia Pm Ind PVD, para facilitar o filtro e edição dos modelos de históricos criados pela Sra. Bruna CB PM, 1 Cia Pm Ind PVD.
  </p>
  <p class="footerp"> &nbsp &nbsp </p>

</footer>
</html>